<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Game Sederhana - Multiplayer</title>
</head>
<body>
    <div id="app">
        <h1 class="title">MATCH RESULT</h1>
        <h3 id="inGame"></h3>
        <h3 id="result"></h3>
        <div class="score">
            <p id="scorePlayer1">Player 1: 0</p>
            <p id="scorePlayer2">Player 2: 0</p>
        </div>
        <div>
            <button onclick="startMultiplayer()">Multiplayer</button>
            <button onclick="startVsBot()">VS Computer</button>
        </div>
        <div class="games" id="playerOptions" style="display: none;">
            <h4>Player 1 Pilih:</h4>
            <div class="option" onclick="pickOption(1, '🫲🏼')">🫲🏼</div>
            <div class="option" onclick="pickOption(1, '✌🏼️')">✌🏼️</div>
            <div class="option" onclick="pickOption(1, '🤛🏼')">🤛🏼</div>
            <h4>Player 2 Pilih:</h4>
            <div class="option" onclick="pickOption(2, '🫲🏼')">🫲🏼</div>
            <div class="option" onclick="pickOption(2, '✌🏼️')">✌🏼️</div>
            <div class="option" onclick="pickOption(2, '🤛🏼')">🤛🏼</div>
        </div>
        <div class="games" id="botOptions" style="display: none;">
            <h4>Player 1 Pilih:</h4>
            <div class="option" onclick="pickOption(1, '🫲🏼')">🫲🏼</div>
            <div class="option" onclick="pickOption(1, '✌🏼️')">✌🏼️</div>
            <div class="option" onclick="pickOption(1, '🤛🏼')">🤛🏼</div>
            <p id="botMessage" style="display: none;">Zabot is making a choice...</p>
        </div>
        <button id="resetButton" onclick="resetGame()">Reset Game</button>
    </div>

    <script>
        class Start {
            constructor() {
                this.playerNames = ["Player 1", "Player 2", "Zabot"];
                this.playerOptions = ["", ""]; // Player options
                this.winner = "";
                this.playerScores = [0, 0]; // Scores for Player 1 and Bot
                this.isVsBot = false; // Flag to check if it's against Bot
            }

            setPlayerOption(option, player) {
                this.playerOptions[player - 1] = option; // Set option for Player 1 or 2
            }

            botBrain() {
                const options = ["🫲🏼", "✌🏼️", "🤛🏼"];
                const botIndex = Math.floor(Math.random() * options.length);
                return options[botIndex];
            }

            winCalculation() {
                const [option1, option2] = this.playerOptions;
                if (option1 === option2) {
                    this.winner = "SERI";
                } else if (
                    (option1 === "🫲🏼" && option2 === "✌🏼️") ||
                    (option1 === "✌🏼️" && option2 === "🤛🏼") ||
                    (option1 === "🤛🏼" && option2 === "🫲🏼")
                ) {
                    this.winner = this.playerNames[1]; // Player 2 wins
                    this.playerScores[1]++;
                } else {
                    this.winner = this.playerNames[0]; // Player 1 wins
                    this.playerScores[0]++;
                }
            }

            matchResult() {
                return this.winner !== "SERI"
                    ? `${this.winner} MENANG!`
                    : `YAHH ${this.winner}, GAK ADA YANG MENANG 😩`;
            }

            resetGame() {
                this.playerOptions = ["", ""]; // Reset player options
                this.winner = "";
            }

            resetScores() {
                this.playerScores = [0, 0]; // Reset scores
            }
        }

        const game = new Start();

        function startMultiplayer() {
            game.isVsBot = false;
            game.playerNames = ["Player 1", "Player 2"]; // Update names for multiplayer
            document.getElementById("botOptions").style.display = "none"; // Hide bot options
            document.getElementById("playerOptions").style.display = "flex"; // Show multiplayer options
            resetGame();
        }

        function startVsBot() {
            game.isVsBot = true;
            game.playerNames = ["Player 1", "Zabot"]; // Update names for bot
            document.getElementById("playerOptions").style.display = "none"; // Hide multiplayer options
            document.getElementById("botOptions").style.display = "flex"; // Show bot options
            resetGame();
        }

        function pickOption(player, option) {
            game.setPlayerOption(option, player); // Set option based on player
            const inGame = document.getElementById("inGame");
            const botMessage = document.getElementById("botMessage");

            inGame.textContent = `${game.playerNames[player - 1]} memilih: ${option}`;

            if (game.isVsBot) {
                if (player === 1) {
                    // If Player 1 picks, wait for Bot
                    botMessage.style.display = "block"; // Show bot message
                    setTimeout(() => {
                        const botChoice = game.botBrain();
                        game.setPlayerOption(botChoice, 2); // Set bot's choice
                        inGame.textContent += `, Bot memilih: ${botChoice}`;
                        botMessage.style.display = "none"; // Hide bot message
                        calculateResult();
                    }, 1500);
                }
            } else {
                // In multiplayer mode, we need both players to select before calculating
                if (game.playerOptions[0] && game.playerOptions[1]) {
                    calculateResult(); // Calculate result only if both have chosen
                }
            }
        }

        function calculateResult() {
            const inGame = document.getElementById("inGame");
            const result = document.getElementById("result");
            const scorePlayer1 = document.getElementById("scorePlayer1");
            const scorePlayer2 = document.getElementById("scorePlayer2");

            game.winCalculation();
            inGame.textContent = `${game.playerOptions[0]} vs ${game.playerOptions[1]}`;
            result.textContent = game.matchResult();
            scorePlayer1.textContent = `Player 1: ${game.playerScores[0]}`;
            scorePlayer2.textContent = game.isVsBot 
                ? `Zabot: ${game.playerScores[1]}` 
                : `Player 2: ${game.playerScores[1]}`; // Update score display for multiplayer

            // Reset player options after calculating result
            game.resetGame();
        }

        function resetGame() {
            game.resetGame();
            document.getElementById("inGame").textContent = "";
            document.getElementById("result").textContent = "";
            document.getElementById("scorePlayer1").textContent = "Player 1: 0";
            document.getElementById("scorePlayer2").textContent = game.isVsBot 
                ? "Zabot: 0" 
                : "Player 2: 0"; // Reset scores correctly
        }
    </script>
</body>
</html>
